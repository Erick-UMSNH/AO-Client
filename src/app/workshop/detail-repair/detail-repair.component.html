<app-location
  title="Reparaciones"
  subtitle="Detalle de la reparación"
  [tabs]="repairDetailTabs"
></app-location>
<div class="d-flex justify-content-end mb-3">
  <button class="btn btn-danger" (click)="openPDF()">Descargar PDF</button>
</div>
<!-- <div class="card">
  <div class="card-header">
    <h3>#{{ repair.order }}</h3>
  </div>
  <div class="card-body">
    <h5 class="card-title">
      {{ repair.client?.name }} {{ repair.client?.lastName }}
    </h5>
    <h3 class="cart-title">
      {{ repair.vehicle?.brand }} {{ repair.vehicle?.model }}
      {{ repair.vehicle?.year }}
    </h3>
    <p class="card-text">Km:{{ repair.km }}</p>
    <p class="card-text">Rines: {{ repair.rims }}</p>
    <p class="card-text">Tapas: {{ repair.covers }}</p>
    <ul class="nav nav-pills nav-fill">
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Ingresado' }"
          aria-current="page"
          >Ingresado</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Diagnosticando' }"
          >Diagnosticando</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Esperando repuesto' }"
          >Esperando repuesto</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Reparando' }"
          >Reparando</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Entregado' }"
          >Entregado</a
        >
      </li>
    </ul>
    <p class="card-text">Concepto: {{ repair.concept }}</p>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Nombre</th>
          <th scope="col">Categoría</th>
          <th scope="col">Cantidad</th>
          <th scope="col">Precio</th>
          <th scope="col">Importe</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of repair.service; index as i">
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ item.name }}</td>
          <td>{{ item.category }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.cost }}</td>
          <td>{{ item.amount }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="card-footer text-muted text-end">
    <h3>Total: {{ repair.total | currency: "MXN":"symbol-narrow" }}</h3>
  </div>
</div> -->

<!-- For the PDF report -->

<div class="card" id="detail-repair">
  <div class="card-header">
    <h2>Automotriz Osnaya</h2>
  </div>
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center">
      <h4>Orden #{{ repair.order }}</h4>
      <h6>{{ repair.date }} | {{ repair.time }} HRS</h6>
    </div>
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h5>Alberto Osnaya</h5>
        <h6 class="d-flex align-items-center">
          <i class="bx bxl-whatsapp data-info"></i>
          443-5124991
        </h6>
        <h6 class="d-flex align-items-center">
          <i class="bx bx-envelope data-info"></i>
          <span>afosnaya.ao@gmail.com</span>
        </h6>
      </div>

      <div class="d-flex justify-content-end">
        <img
          src="../../../assets/AOLogo.jpg"
          alt="logo"
          width="200"
          height="200"
        />
      </div>
    </div>

    <!-- <h5 class="card-title">
      {{ repair.client?.name }} {{ repair.client?.lastName }}
    </h5>
    <h3 class="card-title">
      {{ repair.vehicle?.brand }} {{ repair.vehicle?.model }}
      {{ repair.vehicle?.year }}
    </h3> -->
    <hr />
    <div class="d-flex justify-content-around align-items-baseline">
      <div class="card border-0">
        <div class="card-body">
          <h5 class="card-title">
            <strong> Cliente:</strong>
          </h5>
          <p class="card-text">
            Nombre: {{ repair.client?.name }} {{ repair.client?.lastName }}
          </p>
          <p class="card-text">
            Telefono: {{ repair.client?.areaCode }}-{{ repair.client?.phone }}
          </p>
        </div>
      </div>

      <div class="card border-0">
        <div class="card-body">
          <h5 class="card-title"><strong>Vehículo:</strong></h5>
          <div class="d-flex">
            <div class="row">
              <div class="col">
                <p class="card-text">Marca: {{ repair.vehicle?.brand }}</p>
                <p class="card-text">Modelo: {{ repair.vehicle?.model }}</p>
                <p class="card-text">Año: {{ repair.vehicle?.year }}</p>
              </div>
              <div class="col">
                <p class="card-text">
                  Placas: {{ repair.vehicle?.plate | uppercase }}
                </p>
                <p class="card-text">Km:{{ repair.km }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <ul class="nav nav-pills nav-fill">
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Ingresado' }"
          aria-current="page"
          >Ingresado</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Diagnosticando' }"
          >Diagnosticando</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Refacción' }"
          >Refacción</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Reparando' }"
          >Reparando</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link disabled"
          [ngClass]="{ active: repair.status === 'Entregado' }"
          >Entregado</a
        >
      </li>
    </ul>
    <hr />
    <div class="text-center mt-4 mb-4">
      <h3>{{ repair.concept | titlecase }}</h3>
    </div>

    <div class="d-flex justify-content-center mb-5">
      <img
        src="../../../assets/vehicle.png"
        alt="vehicle"
        width="550"
        height="500"
        class="img-fluid"
      />
    </div>
    <div class="mb-3">
      <h6><strong>Observaciones:</strong></h6>
      <p>{{ repair.comments }}</p>
    </div>

    <div class="mb-3 text-center">
      <h4>Detalle de reparación</h4>
    </div>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Nombre</th>
          <th scope="col">Categoría</th>
          <th scope="col">Cantidad</th>
          <th scope="col">Precio</th>
          <th scope="col">Importe</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of repair.service; index as i">
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ item.name }}</td>
          <td>{{ item.category }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.cost | currency: "MXN":"symbol-narrow" }}</td>
          <td>{{ item.amount | currency: "MXN":"symbol-narrow" }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="card-footer text-muted text-end">
    <h3>Total: {{ repair.total | currency: "MXN":"symbol-narrow" }}</h3>
  </div>
</div>
