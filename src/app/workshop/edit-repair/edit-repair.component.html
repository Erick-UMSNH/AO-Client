<app-location
  title="Editando orden"
  subtitle="Edita los campos de tu orden de reparación"
  [tabs]="editRepairTabs"
></app-location>

<div class="container">
  <form [formGroup]="repairForm" (ngSubmit)="updateRepair()">
    <div class="mb-3">
      <label for="rDate" class="form-label fw-bold">Fecha de Ingreso*:</label>
      <input
        type="datetime-local"
        id="rDateId"
        name="rDate"
        formControlName="rDate"
        class="form-control"
      />
      <div
        class="error"
        *ngIf="
          repairForm.controls.rDate.errors?.required &&
          repairForm.controls.rDate.touched
        "
      >
        Selecciona una fecha y una hora
      </div>
    </div>
    <div class="mb-3">
      <label for="rClient" class="form-label fw-bold">Cliente*:</label>
      <ng-select formControlName="rClient">
        <ng-option *ngFor="let client of clients" [value]="client.id"
          >{{ client.name }} {{ client.lastName }}</ng-option
        >
      </ng-select>
      <div
        class="error"
        *ngIf="
          repairForm.controls.rClient.errors?.required &&
          repairForm.controls.rClient.touched
        "
      >
        Selecciona un cliente
      </div>
    </div>
    <div class="mb-3">
      <label for="rVehicle" class="form-label fw-bold">Vehículo*:</label>
      <ng-select formControlName="rVehicle">
        <ng-option *ngFor="let vehicle of vehicles" [value]="vehicle.plate"
          >{{ vehicle.brand }} | {{ vehicle.model }} | {{ vehicle.year }} |
          {{ vehicle.plate }}</ng-option
        >
      </ng-select>
      <div
        class="error"
        *ngIf="
          repairForm.controls.rVehicle.errors?.required &&
          repairForm.controls.rVehicle.touched
        "
      >
        Selecciona un vehículo
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-4">
        <label for="rKm" class="form-label fw-bold">Km:</label>

        <input
          type="number"
          name="rKm"
          id="rKmId"
          placeholder="000000"
          step="1"
          min="0"
          class="form-control"
          aria-describedby="km"
          formControlName="rKm"
        />
      </div>
      <div class="col-4">
        <label for="rRims" class="form-label fw-bold">Rines:</label>

        <input
          type="number"
          name="rRims"
          id="rRimsId"
          placeholder="0"
          step="1"
          min="0"
          max="4"
          class="form-control"
          aria-describedby="rines"
          formControlName="rRims"
        />
      </div>
      <div class="col-4">
        <label for="rCovers" class="form-label fw-bold">Tapas:</label>

        <input
          type="number"
          name="rCovers"
          id="rCoversId"
          placeholder="0"
          step="1"
          min="0"
          max="4"
          class="form-control"
          aria-describedby="tapas"
          formControlName="rCovers"
        />
      </div>
    </div>

    <div class="mb-3">
      <label for="rConcept" class="form-label fw-bold">Concepto*:</label>
      <select
        name="rConcept"
        id="rConceptId"
        class="form-select"
        formControlName="rConcept"
        aria-label="rConcept selection"
      >
        <option value="Reparación">Reparación</option>
        <option value="Servicio">Servicio</option>
        <option value="Mantenimiento">Mantenimiento</option>
        <option value="Revisión">Revisión</option>
      </select>
      <div
        class="error"
        *ngIf="
          repairForm.controls.rConcept.errors?.required &&
          repairForm.controls.rConcept.touched
        "
      >
        Selecciona un concepto
      </div>
    </div>

    <div class="mb-3">
      <label for="rService" class="form-label fw-bold">Servicio*:</label>
      <ng-select formControlName="rService">
        <ng-option *ngFor="let service of services" [value]="service.name">{{
          service.name
        }}</ng-option>
      </ng-select>

      <div
        class="error"
        *ngIf="
          repairForm.controls.rService.errors?.required &&
          repairForm.controls.rService.touched
        "
      >
        Selecciona un servicio
      </div>
    </div>

    <h1 class="mb-3">Tabla de desglose</h1>
    <div class="d-grid gap-2 col-6 mx-auto">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="!repairForm.valid"
      >
        <div class="d-inline-flex">
          Registrar orden <i class="bx bxs-wrench"></i>
        </div>
      </button>
    </div>
  </form>
</div>
